syntax = "proto3";
package responses;
import "google/protobuf/struct.proto";
option go_package = "code.byted.org/machinelearning/maas-backend/idl/grpc/responses";
message ResponseDoubaoAppFeatureType {
  enum Enum {
    unspecified = 0;
    enabled = 1;
    disabled = 2;
  }
}
message ItemType {
  enum Enum {
    unspecified = 0;
    message = 1;
    function_call = 2;
    function_call_output = 3;
    reasoning = 4;
    item_reference = 5;
    transcription = 6;
    web_search_call = 7;
    image_process = 8;
    mcp_approval_request = 9;
    mcp_approval_response = 10;
    mcp_list_tools = 11;
    mcp_call = 12;
    knowledge_search_call = 13;
    doubao_app_call = 14;
  }
}
message DoubaoAppBlockType {
  enum Enum {
    unspecified = 0;
    output_text = 1;
    reasoning_text = 2;
    search = 3;
    reasoning_search = 4;
  }
}
message ToolType {
  enum Enum {
    unspecified = 0;
    function = 1;
    web_search_preview = 2;
    web_search = 3;
    image_process = 4;
    mcp = 5;
    knowledge_search = 6;
    doubao_app = 7;
  }
}
message EventType {
  enum Enum {
    unspecified = 0;
    response_created = 1;
    response_in_progress = 2;
    response_completed = 3;
    response_failed = 4;
    response_incomplete = 5;
    response_output_item_added = 6;
    response_output_item_done = 7;
    response_content_part_added = 8;
    response_content_part_done = 9;
    response_output_text_delta = 10;
    response_output_text_done = 11;
    response_reasoning_summary_text_delta = 12;
    response_reasoning_summary_text_done = 13;
    response_reasoning_summary_part_added = 14;
    response_reasoning_summary_part_done = 15;
    response_function_call_arguments_delta = 16;
    response_function_call_arguments_done = 17;
    error = 18;
    response_transcription_part_added = 19;
    response_transcription_part_done = 20;
    response_transcription_text_delta = 21;
    response_transcription_text_done = 22;
    response_web_search_call_in_progress = 23;
    response_web_search_call_searching = 24;
    response_web_search_call_completed = 25;
    response_output_text_annotation_added = 26;
    response_image_process_call_in_progress = 30;
    response_image_process_call_progressing = 31;
    response_image_process_call_completed = 32;
    response_image_process_call_failed = 33;
    response_mcp_list_tools_in_progress = 34;
    response_mcp_list_tools_completed = 35;
    response_mcp_call_in_progress = 36;
    response_mcp_call_arguments_delta = 37;
    response_mcp_call_arguments_done = 38;
    response_mcp_call_completed = 39;
    response_mcp_call_failed = 40;
    response_mcp_approval_request = 41;
    response_knowledge_search_call_in_progress = 42;
    response_knowledge_search_call_searching = 43;
    response_knowledge_search_call_completed = 44;
    response_knowledge_search_call_failed = 45;
    response_doubao_app_call_in_progress = 1000;
    response_doubao_app_call_failed = 1001;
    response_doubao_app_call_completed = 1002;
    response_doubao_app_call_block_added = 1003;
    response_doubao_app_call_block_done = 1004;
    response_doubao_app_call_reasoning_text_delta = 1005;
    response_doubao_app_call_reasoning_text_done = 1006;
    response_doubao_app_call_output_text_delta = 1007;
    response_doubao_app_call_output_text_done = 1008;
    response_doubao_app_call_search_in_progress = 1009;
    response_doubao_app_call_search_searching = 1010;
    response_doubao_app_call_search_completed = 1011;
    response_doubao_app_call_reasoning_search_in_progress = 1012;
    response_doubao_app_call_reasoning_search_searching = 1013;
    response_doubao_app_call_reasoning_search_completed = 1014;
  }
}
message ItemEasyMessage {
  // The type of the message input. Always `message`.
  optional ItemType.Enum type = 1;
  // The role of the message input. One of `user`, `assistant`, `system`, or `developer`.
  MessageRole.Enum role = 2;
  // Text, image, or audio input to the model, used to generate a response. Can also contain previous assistant responses.
  optional MessageContent content = 3;
  optional bool partial = 5;
}
message ContentItem {
  oneof union {
    ContentItemText text = 1;
    ContentItemImage image = 2;
    ContentItemVideo video = 3;
    ContentItemAudio audio = 4;
    ContentItemFile file = 5;
  }
}
message OutputContentItem {
  oneof union {
    OutputContentItemText text = 1;
  }
}
message ItemOutputMessage {
  // The type of the output message. Always `message`.
  ItemType.Enum type = 1;
  // The role of the output message. Always `assistant`.
  MessageRole.Enum role = 2;
  // The content of the output message.
  repeated OutputContentItem content = 3;
  // The status of the message input. One of `in_progress`, `completed`, or `incomplete`. Populated when input items are returned via API.
  ItemStatus.Enum status = 4;
  // The unique ID of the output message.
  string id = 5;
  optional bool partial = 6;
}
message OutputContentItemText {
  // The type of the output text. Always `output_text`.
  ContentItemType.Enum type = 1;
  // The text output from the model.
  string text = 2;
  // The annotation of the output text.
  repeated Annotation annotations = 3;
}
// Items of DoubaoApp Tool output
message DoubaoAppCallBlockOutputText {
  optional string id = 1;
  DoubaoAppBlockType.Enum type = 2; // sdk:  {"enum": {"const": "output_text"}}
  string text = 3;
  ItemStatus.Enum status = 4;
  optional string parent_id = 100;
}
message DoubaoAppCallBlockReasoningText {
  optional string id = 1;
  DoubaoAppBlockType.Enum type = 2; // sdk:  {"enum": {"const": "reasoning_text"}}
  string reasoning_text = 3;
  ItemStatus.Enum status = 4;
  optional string parent_id = 100;
}
message DoubaoAppSearchTextItem {
  int64 id = 1; // @inject_tag: json:"-"
  string summary = 2; // @inject_tag: json:"-"
  string title = 3;
  string sitename = 4;
  string url = 5;
  string logo_url = 6; // @inject_tag: json:"-"
  string doc_id = 7; // @inject_tag: json:"-"
  string image_url = 8; // @inject_tag: json:"-"
  bool has_image = 9; // @inject_tag: json:"-"
  string publish_time_second = 10; // @inject_tag: json:"-"
  int64 original_doc_rank = 11; // @inject_tag: json:"-"
  int32 source_from = 12; // @inject_tag: json:"-"
  string source_id = 13; // @inject_tag: json:"-"
  string source_for_baike = 14; // @inject_tag: json:"-"
  int64 index = 15; // @inject_tag: json:"-"
}
message DoubaoAppSearchResult {
  DoubaoAppSearchTextItem text_card = 1;
}
message DoubaoAppCallBlockSearch {
  optional string id = 1;
  DoubaoAppBlockType.Enum type = 2; // sdk:  {"enum": {"const": "search"}}
  optional string summary = 3;
  repeated string queries = 4;
  repeated DoubaoAppSearchResult results = 5;
  ItemStatus.Enum status = 6;
  optional string parent_id = 100;
}
message DoubaoAppCallBlockReasoningSearch {
  optional string id = 1;
  DoubaoAppBlockType.Enum type = 2; // sdk:  {"enum": {"const": "reasoning_search"}}
  optional string summary = 3;
  repeated string queries = 4;
  repeated DoubaoAppSearchResult results = 5;
  ItemStatus.Enum status = 6;
  optional string parent_id = 100;
}
message DoubaoAppCallBlock {
  oneof union {
    DoubaoAppCallBlockOutputText output_text = 1;
    DoubaoAppCallBlockReasoningText reasoning_text = 2;
    DoubaoAppCallBlockSearch search = 3;
    DoubaoAppCallBlockReasoningSearch reasoning_search = 4;
  }
}
message ItemDoubaoAppCall {
  optional string id = 1;
  ItemType.Enum type = 2; // sdk:  {"enum": {"const": "doubao_app_call"}}
  optional string feature = 3;
  repeated DoubaoAppCallBlock blocks = 4;
  ItemStatus.Enum status = 5;
}
message ResponsesTool {
  oneof union {
    ToolFunction tool_function = 1;
    ToolWebSearch tool_web_search = 2;
    ToolImageProcess tool_image_process = 3;
    ToolMcp tool_mcp = 4;
    ToolKnowledgeSearch tool_knowledge_search = 5;
    ToolDoubaoApp tool_doubao_app = 6;
  }
}
message DoubaoAppFeature {
  optional DoubaoAppFeatureItem chat = 2;
  optional DoubaoAppFeatureItem deep_chat = 3;
  optional DoubaoAppFeatureItem ai_search = 4;
  optional DoubaoAppFeatureItem reasoning_search = 5;
}
message DoubaoAppFeatureItem {
  optional ResponseDoubaoAppFeatureType.Enum type = 1;
  optional string role_description = 2;
}
message ToolDoubaoApp {
  ToolType.Enum type = 1; // sdk:  {"enum": {"const": "doubao_app"}}
  DoubaoAppFeature feature = 2;
  optional UserLocation user_location = 3;
}
message OutputItem {
  oneof union {
    ItemOutputMessage output_message = 1;
    ItemFunctionToolCall function_tool_call = 2;
    ItemReasoning reasoning = 3;
    ItemFunctionWebSearch function_web_search = 5;
    ItemFunctionImageProcess function_image_process = 6;
    ItemFunctionMcpApprovalRequest function_mcp_approval_request = 7;
    ItemFunctionMcpListTools function_mcp_list_tools = 8;
    ItemFunctionMcpCall function_mcp_call = 9;
    ItemFunctionKnowledgeSearch function_knowledge_search = 10;
    ItemDoubaoAppCall function_doubao_app_call = 11;
  }
}
message ToolUsage {
  // The usage of web search tools.
  optional int64 web_search = 1;
  // The usage of mcp tools.
  optional int64 mcp = 2;
  // The usage of knowledge search tools.
  optional int64 knowledge_search = 3;
  optional int64 doubao_app = 4;
}
message ToolUsageDetail {
  // The usage of web search tools.
  map<string, int64> web_search = 1;
  // The usage of MCP tools.
  map<string, int64> mcp = 2;
  // The usage of knowledge search tools.
  map<string, int64> knowledge_search = 3;
  map<string, int64> doubao_app = 4;
}
message Event {
  oneof event {
    ResponseEvent response = 1;
    ItemEvent item = 2;
    ContentPartEvent content_part = 3;
    OutputTextEvent text = 4;
    ReasoningSummaryPartEvent reasoning_part = 5;
    ReasoningSummaryTextEvent reasoning_text = 6;
    FunctionCallArgumentsEvent function_call_arguments = 7;
    ErrorEvent error = 8;
    ResponseWebSearchCallInProgressEvent response_web_search_call_in_progress = 11;
    ResponseWebSearchCallSearchingEvent response_web_search_call_searching = 12;
    ResponseWebSearchCallCompletedEvent response_web_search_call_completed = 13;
    ResponseAnnotationAddedEvent response_annotation_added = 14;
    ResponseImageProcessCallInProgressEvent response_image_process_call_in_progress = 15;
    ResponseImageProcessCallProcessingEvent response_image_process_call_processing = 16;
    ResponseImageProcessCallCompletedEvent response_image_process_call_completed = 17;
    ResponseMcpListToolsInProgressEvent response_mcp_list_tools_in_progress = 18;
    ResponseMcpListToolsCompletedEvent response_mcp_list_tools_completed = 19;
    ResponseMcpCallInProgressEvent response_mcp_call_in_progress = 20;
    ResponseMcpCallArgumentsDeltaEvent response_mcp_call_arguments_delta = 21;
    ResponseMcpCallArgumentsDoneEvent response_mcp_call_arguments_done = 22;
    ResponseMcpCallCompletedEvent response_mcp_call_completed = 23;
    ResponseMcpCallFailedEvent response_mcp_call_failed = 24;
    ResponseKnowledgeSearchCallInProgressEvent response_knowledge_search_call_in_progress = 26;
    ResponseKnowledgeSearchCallSearchingEvent response_knowledge_search_call_searching = 27;
    ResponseKnowledgeSearchCallCompletedEvent response_knowledge_search_call_completed = 28;
    ResponseKnowledgeSearchCallFailedEvent response_knowledge_search_call_failed = 29;
    ResponseInProgressEvent response_in_progress = 30;
    ResponseCompletedEvent response_completed = 31;
    ResponseFailedEvent response_failed = 32;
    ResponseIncompleteEvent response_incomplete = 33;
    ItemDoneEvent item_done = 34;
    ContentPartDoneEvent content_part_done = 35;
    OutputTextDoneEvent text_done = 36;
    ReasoningSummaryPartDoneEvent reasoning_part_done = 37;
    ReasoningSummaryTextDoneEvent reasoning_text_done = 38;
    FunctionCallArgumentsDoneEvent function_call_arguments_done = 39;
    ResponseDoubaoAppCallInProgressEvent response_doubao_app_call_in_progress = 1000;
    ResponseDoubaoAppCallCompletedEvent response_doubao_app_call_completed = 1001;
    ResponseDoubaoAppCallFailedEvent response_doubao_app_call_failed = 1002;
    ResponseDoubaoAppCallOutputTextDeltaEvent response_doubao_app_call_output_text_delta = 1003;
    ResponseDoubaoAppCallOutputTextDoneEvent response_doubao_app_call_output_text_done = 1004;
    ResponseDoubaoAppCallSearchInProgressEvent response_doubao_app_call_search_in_progress = 1005;
    ResponseDoubaoAppCallSearchSearchingEvent response_doubao_app_call_search_searching = 1006;
    ResponseDoubaoAppCallSearchCompletedEvent response_doubao_app_call_search_completed = 1007;
    ResponseDoubaoAppCallReasoningTextDeltaEvent response_doubao_app_call_reasoning_text_delta = 1008;
    ResponseDoubaoAppCallReasoningTextDoneEvent response_doubao_app_call_reasoning_text_done = 1009;
    ResponseDoubaoAppCallReasoningSearchInProgressEvent response_doubao_app_call_reasoning_search_in_progress = 1100;
    ResponseDoubaoAppCallReasoningSearchSearchingEvent response_doubao_app_call_reasoning_search_searching = 1101;
    ResponseDoubaoAppCallReasoningSearchCompletedEvent response_doubao_app_call_reasoning_search_completed = 1102;
    ResponseDoubaoAppCallBlockAddedEvent response_doubao_app_call_block_added = 1103;
    ResponseDoubaoAppCallBlockDoneEvent response_doubao_app_call_block_done = 1104;
  }
}
// doubao app call events
message ResponseDoubaoAppCallInProgressEvent {
  EventType.Enum type = 1; // sdk:  {"enum": {"const": "response.doubao_app_call.in_progress"}}
  string item_id = 2;
  int64 output_index = 3;
  int64 sequence_number = 4; // @inject_tag: json:"sequence_number"
  string feature = 5;
}
message ResponseDoubaoAppCallFailedEvent {
  EventType.Enum type = 1; // sdk:  {"enum": {"const": "response.doubao_app_call.failed"}}
  string item_id = 2;
  int64 output_index = 3;
  int64 sequence_number = 4; // @inject_tag: json:"sequence_number"
  optional string error_message = 5;
}
message ResponseDoubaoAppCallCompletedEvent {
  EventType.Enum type = 1; // sdk:  {"enum": {"const": "response.doubao_app_call.completed"}}
  string item_id = 2;
  int64 output_index = 3;
  int64 sequence_number = 4; // @inject_tag: json:"sequence_number"
  string feature = 5;
  repeated DoubaoAppCallBlock blocks = 6;
}
message ResponseDoubaoAppCallBlockAddedEvent {
  EventType.Enum type = 1; // sdk:  {"enum": {"const": "response.doubao_app_call.block.added"}}
  string item_id = 2;
  int64 output_index = 3;
  int64 sequence_number = 4; // @inject_tag: json:"sequence_number"
  DoubaoAppCallBlock block = 5;
}
message ResponseDoubaoAppCallBlockDoneEvent {
  EventType.Enum type = 1; // sdk:  {"enum": {"const": "response.doubao_app_call.block.done"}}
  string item_id = 2;
  int64 output_index = 3;
  int64 sequence_number = 4; // @inject_tag: json:"sequence_number"
  DoubaoAppCallBlock block = 5;
}
message ResponseDoubaoAppCallReasoningTextDeltaEvent {
  EventType.Enum type = 1; // sdk:  {"enum": {"const": "response.doubao_app_call.reasoning_text.delta"}}
  string item_id = 2;
  int64 output_index = 3;
  int64 block_index = 4;
  int64 sequence_number = 5; // @inject_tag: json:"sequence_number"
  optional string delta = 6;
}
message ResponseDoubaoAppCallReasoningTextDoneEvent {
  EventType.Enum type = 1; // sdk:  {"enum": {"const": "response.doubao_app_call.reasoning_text.done"}}
  string item_id = 2;
  int64 output_index = 3;
  int64 block_index = 4;
  int64 sequence_number = 5; // @inject_tag: json:"sequence_number"
  optional string text = 6;
}
message ResponseDoubaoAppCallOutputTextDeltaEvent {
  EventType.Enum type = 1; // sdk:  {"enum": {"const": "response.doubao_app_call.output_text.delta"}}
  string item_id = 2;
  int64 output_index = 3;
  int64 block_index = 4;
  int64 sequence_number = 5; // @inject_tag: json:"sequence_number"
  optional string delta = 6;
}
message ResponseDoubaoAppCallOutputTextDoneEvent {
  EventType.Enum type = 1; // sdk:  {"enum": {"const": "response.doubao_app_call.output_text.done"}}
  string item_id = 2;
  int64 output_index = 3;
  int64 block_index = 4;
  int64 sequence_number = 5; // @inject_tag: json:"sequence_number"
  optional string text = 6;
}
message ResponseDoubaoAppCallReasoningSearchInProgressEvent {
  EventType.Enum type = 1; // sdk:  {"enum": {"const": "response.doubao_app_call.search.in_progress"}}
  string item_id = 2;
  int64 output_index = 3;
  int64 block_index = 4;
  int64 sequence_number = 5; // @inject_tag: json:"sequence_number"
}
message ResponseDoubaoAppCallReasoningSearchSearchingEvent {
  EventType.Enum type = 1; // sdk:  {"enum": {"const": "response.doubao_app_call.search.searching"}}
  string item_id = 2;
  int64 output_index = 3;
  int64 block_index = 4;
  int64 sequence_number = 5; // @inject_tag: json:"sequence_number"
  optional string searching_state = 6;
}
message ResponseDoubaoAppCallReasoningSearchCompletedEvent {
  EventType.Enum type = 1; // sdk:  {"enum": {"const": "response.doubao_app_call.search.completed"}}
  string item_id = 2;
  int64 output_index = 3;
  int64 block_index = 4;
  int64 sequence_number = 5; // @inject_tag: json:"sequence_number"
  optional string summary = 6;
  repeated string queries = 7;
  repeated DoubaoAppSearchResult results = 8;
}
message ResponseDoubaoAppCallSearchInProgressEvent {
  EventType.Enum type = 1; // sdk:  {"enum": {"const": "response.doubao_app_call.reasoning_search.in_progress"}}
  string item_id = 2;
  int64 output_index = 3;
  int64 block_index = 4;
  int64 sequence_number = 5; // @inject_tag: json:"sequence_number"
}
message ResponseDoubaoAppCallSearchSearchingEvent {
  EventType.Enum type = 1; // sdk:  {"enum": {"const": "response.doubao_app_call.reasoning_search.searching"}}
  string item_id = 2;
  int64 output_index = 3;
  int64 block_index = 4;
  int64 sequence_number = 5; // @inject_tag: json:"sequence_number"
  optional string searching_state = 6;
}
message ResponseDoubaoAppCallSearchCompletedEvent {
  EventType.Enum type = 1; // sdk:  {"enum": {"const": "response.doubao_app_call.reasoning_search.completed"}}
  string item_id = 2;
  int64 output_index = 3;
  int64 block_index = 4;
  int64 sequence_number = 5; // @inject_tag: json:"sequence_number"
  optional string summary = 6;
  repeated string queries = 7;
  repeated DoubaoAppSearchResult results = 8;
}